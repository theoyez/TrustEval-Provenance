<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TrustEval-Provenance — Compare</title>
<link rel="stylesheet" href="web/styles.css"/>
<script src="web/common.js"></script>
</head><body>
  <div class="header">
    <a class="btn" href="index.html">← Leaderboard</a>
    <h1>Compare runs</h1>
    <div></div>
  </div>
  <div class="container">
    <div class="card" style="display:flex;gap:12px;flex-wrap:wrap;align-items:center">
      <select id="left" class="btn"></select>
      <select id="right" class="btn"></select>
      <a id="open" class="btn" target="_blank">Open reports</a>
    </div>
    <div class="card">
      <table class="table">
        <thead><tr><th>Metric</th><th id="lh"></th><th id="rh"></th><th>Δ (right–left)</th></tr></thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>
<script>
const METS = ["accuracy", "grounding", "safety", "robustness", "bias", "calibration", "trust"];
(async ()=>{
  const data = await loadJSON('leaderboard.json');
  const runs = data.runs || [];
  const ids = runs.map(r=>r.run);
  const L = document.getElementById('left'), R = document.getElementById('right');
  ids.forEach(x=>{ L.insertAdjacentHTML('beforeend', `<option>${x}</option>`); R.insertAdjacentHTML('beforeend', `<option>${x}</option>`); });
  function get(id){ return runs.find(r=>r.run===id); }
  function render(){
    const l = get(L.value), r = get(R.value); if(!l||!r) return;
    document.getElementById('lh').textContent = l.run;
    document.getElementById('rh').textContent = r.run;
    const tb = document.getElementById('tbody'); tb.innerHTML='';
    METS.forEach(m=>{
      const lv = parseFloat(String(l[m]).replace('%',''))||0;
      const rv = parseFloat(String(r[m]).replace('%',''))||0;
      const d = (rv-lv).toFixed(1)+'%';
      tb.insertAdjacentHTML('beforeend', `<tr class="row"><td>${m[0].toUpperCase()+m.slice(1)}</td><td>${l[m]}</td><td>${r[m]}</td><td style="color:${rv>=lv?'#10b981':'#ef4444'}">${d}</td></tr>`);
    });
    document.getElementById('open').onclick = (e)=>{ window.open(l.report,'_blank'); window.open(r.report,'_blank'); e.preventDefault(); };
  }
  L.value = ids[0]; R.value = ids[Math.min(1, ids.length-1)];
  L.onchange = R.onchange = render; render();
})();
</script>
</body></html>
